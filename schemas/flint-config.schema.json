{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "title": "Flint Configuration",
    "description": "Configuration for the Flint VS Code extension",
    "properties": {
        "schemaVersion": {
            "type": "string",
            "enum": [
                "0.1",
                "0.2"
            ],
            "description": "Configuration schema version"
        },
        "project-paths": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "Array of paths where Ignition projects can be found (relative to config file or absolute)"
        },
        "gateways": {
            "type": "object",
            "additionalProperties": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "Gateway identifier"
                    },
                    "host": {
                        "type": "string",
                        "description": "Gateway host URL or IP address (legacy single-environment format)"
                    },
                    "port": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 65535,
                        "description": "Gateway port number (legacy single-environment format)"
                    },
                    "ssl": {
                        "type": "boolean",
                        "description": "Whether to use SSL connection (legacy single-environment format)"
                    },
                    "username": {
                        "type": "string",
                        "description": "Username for gateway authentication"
                    },
                    "ignoreSSLErrors": {
                        "type": "boolean",
                        "default": false,
                        "description": "Whether to ignore SSL certificate validation errors"
                    },
                    "environments": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "object",
                            "properties": {
                                "host": {
                                    "type": "string",
                                    "description": "Gateway host URL or IP address for this environment"
                                },
                                "port": {
                                    "type": "integer",
                                    "minimum": 1,
                                    "maximum": 65535,
                                    "description": "Gateway port number for this environment"
                                },
                                "ssl": {
                                    "type": "boolean",
                                    "description": "Whether to use SSL connection for this environment"
                                },
                                "username": {
                                    "type": "string",
                                    "description": "Username for gateway authentication for this environment"
                                },
                                "ignoreSSLErrors": {
                                    "type": "boolean",
                                    "default": false,
                                    "description": "Whether to ignore SSL certificate validation errors for this environment"
                                },
                                "ignitionVersion": {
                                    "type": "string",
                                    "pattern": "^\\d+\\.\\d+(\\.\\d+)?$",
                                    "description": "Ignition version for this environment (e.g., '8.1.33', '8.3.2')"
                                },
                                "modules": {
                                    "type": "object",
                                    "properties": {
                                        "project-scan-endpoint": {
                                            "type": "object",
                                            "properties": {
                                                "apiTokenFilePath": {
                                                    "type": "string",
                                                    "description": "Path to API token file for Ignition 8.3+ Gateway API authentication (absolute or relative to workspace root)"
                                                },
                                                "forceUpdateDesigner": {
                                                    "type": "boolean",
                                                    "default": false,
                                                    "description": "Whether to force update designers when scanning (module endpoint only, default: false)"
                                                }
                                            },
                                            "description": "Project scan endpoint module configuration for this environment"
                                        }
                                    },
                                    "description": "Module configurations for this environment"
                                }
                            },
                            "required": [
                                "host"
                            ],
                            "description": "Environment-specific gateway configuration"
                        },
                        "description": "Multiple environments for this gateway"
                    },
                    "defaultEnvironment": {
                        "type": "string",
                        "description": "Default environment to use when gateway is selected"
                    },
                    "projects": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "List of project names available on this gateway"
                    },
                    "enabled": {
                        "type": "boolean",
                        "default": true,
                        "description": "Whether this gateway is enabled"
                    },
                    "ignitionVersion": {
                        "type": "string",
                        "pattern": "^\\d+\\.\\d+(\\.\\d+)?$",
                        "description": "Ignition version for this gateway (e.g., '8.1.33', '8.3.2')"
                    },
                    "modules": {
                        "type": "object",
                        "properties": {
                            "project-scan-endpoint": {
                                "type": "object",
                                "properties": {
                                    "enabled": {
                                        "type": "boolean",
                                        "default": false,
                                        "description": "Whether the project-scan-endpoint module is installed on this gateway"
                                    }
                                },
                                "description": "Project scan endpoint module configuration"
                            }
                        },
                        "description": "Module configurations for this gateway"
                    }
                },
                "anyOf": [
                    {
                        "required": [
                            "host"
                        ]
                    },
                    {
                        "required": [
                            "environments"
                        ]
                    }
                ],
                "description": "Gateway configuration with single environment or multiple environments"
            },
            "description": "Gateway configurations"
        },
        "settings": {
            "type": "object",
            "properties": {
                "showInheritedResources": {
                    "type": "boolean",
                    "default": true,
                    "description": "Show inherited resources in the project browser"
                },
                "groupResourcesByType": {
                    "type": "boolean",
                    "default": true,
                    "description": "Group resources by type in the project browser"
                },
                "autoRefreshProjects": {
                    "type": "boolean",
                    "default": true,
                    "description": "Automatically refresh projects when files change"
                },
                "searchHistoryLimit": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 50,
                    "description": "Maximum number of search history entries to keep"
                }
            },
            "description": "Extension behavior settings"
        }
    },
    "required": [
        "schemaVersion",
        "project-paths",
        "gateways"
    ]
}